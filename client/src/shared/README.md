# Shared Layer

## Описание

Shared слой содержит переиспользуемые утилиты, библиотеки и компоненты, которые не зависят от бизнес-логики.

## Структура

```
shared/
├── api/          # API утилиты и конфигурация
├── lib/          # Утилиты и хелперы
├── ui/           # Переиспользуемые UI компоненты
└── README.md     # Документация
```

## Lib

### handleError

Универсальная функция для обработки ошибок в приложении.

#### Сигнатура

```typescript
handleError(
  setLoading: (loading: boolean) => void,
  error: unknown,
  operationName: string,
  showNotification?: boolean
): void
```

#### Параметры

- `setLoading` - Функция для управления состоянием загрузки
- `error` - Объект ошибки для обработки
- `operationName` - Название операции для уведомления
- `showNotification` - Флаг отображения уведомления (по умолчанию true)

#### Функциональность

1. **Управление состоянием** - сбрасывает флаг загрузки
2. **Логирование** - записывает ошибку в консоль
3. **Уведомления** - показывает пользователю сообщение об ошибке

#### Пример использования

```typescript
import { handleError } from '@/shared/lib/handleError';

try {
  await apiCall();
} catch (error) {
  handleError((loading) => setLoading(loading), error, 'загрузки данных');
}
```

## API

### Конфигурация

Общие настройки для API запросов:

- Базовые URL
- Заголовки по умолчанию
- Таймауты
- Интерцепторы

### Утилиты

- Обработка HTTP ответов
- Валидация данных
- Трансформация данных

## UI

### Переиспользуемые компоненты

Компоненты, которые можно использовать в разных частях приложения:

- Кнопки
- Формы
- Модальные окна
- Индикаторы загрузки

## Принципы использования

### 1. Независимость от бизнес-логики

Shared слой не должен содержать:

- Специфичную бизнес-логику
- Зависимости от entities
- Ссылки на конкретные features

### 2. Переиспользуемость

Все компоненты и утилиты должны быть:

- Универсальными
- Настраиваемыми
- Хорошо документированными

### 3. Стабильность

Изменения в shared слое должны быть:

- Обратно совместимыми
- Тщательно протестированными
- Документированными

## Интеграция с другими слоями

### Entities

Entities могут использовать shared утилиты для:

- Обработки ошибок
- API запросов
- Валидации данных

### Features

Features могут использовать shared компоненты для:

- UI элементов
- Утилит
- Хелперов

### Pages

Pages могут использовать shared для:

- Общих компонентов
- Утилит
- API конфигурации

## Расширение

### Добавление новых утилит

1. Создать файл в соответствующей папке
2. Добавить JSDoc документацию
3. Экспортировать из index.ts
4. Обновить README

### Добавление новых компонентов

1. Создать компонент в ui/
2. Добавить типы и пропсы
3. Добавить стили
4. Создать документацию

## Тестирование

### Unit тесты

Все утилиты должны иметь unit тесты:

- Позитивные сценарии
- Негативные сценарии
- Граничные случаи

### Интеграционные тесты

Компоненты должны тестироваться:

- В разных контекстах
- С разными пропсами
- На разных устройствах
